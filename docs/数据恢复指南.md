# 数据库数据恢复指南

## 当前数据库中的数据概览

根据数据库查询，当前有以下数据：

### 1. 商品（4个）
- 芒果果汁 (p1) - 299元/箱，2.5kg/箱
- 金桂茶 (p2) - 399元/箱，3kg/箱
- 茉莉茶 (p3) - 499元/箱，3.5kg/箱
- 龙井茶 (p4) - 599元/箱，4kg/箱

### 2. 代理商（5个）
1. **张三** (a1)
   - 主手机号：13800138001
   - 备用手机号：13900139001
   - 地址：北京市朝阳区建国路88号
   - 余额：15000元
   - A产品年度目标：500箱
   - 混合产品年度目标：300箱

2. **李四** (a2)
   - 主手机号：13800138002
   - 地址：上海市浦东新区陆家嘴环路1000号
   - 余额：-1500元（欠款）
   - A产品年度目标：400箱
   - 混合产品年度目标：250箱

3. **王五** (a3)
   - 主手机号：13800138003
   - 地址：广州市天河区珠江新城花城大道
   - 余额：28500元
   - A产品年度目标：600箱
   - 混合产品年度目标：400箱

4. **赵六** (a4)
   - 主手机号：13800138004
   - 备用手机号：13900139004
   - 地址：深圳市南山区科技园南区
   - 余额：8200元
   - A产品年度目标：350箱
   - 混合产品年度目标：200箱

5. **啊** (e9ed2ff4-bbea-4975-978d-73d0dd5c4b57)
   - 主手机号：13288888888
   - 地址：浙江省
   - 余额：0元
   - A产品年度目标：1000箱
   - 混合产品年度目标：500箱

### 3. 收款账户（3个）
- 公司对公账户 (pay1)
- 张总微信 (pay2)
- 张总支付宝 (pay3)

### 4. 促销活动（2个）
1. **芒果果汁促销** (promo1)
   - 规则：买100箱送8箱随机茶
   - 活动时间：2024-12-01 至 2025-12-31

2. **茶类产品促销** (promo2)
   - 规则：买100箱送6箱随机茶
   - 活动时间：2024-12-01 至 2025-12-31

### 5. 订单（3个）
1. **订单o1** - 张三的订单
   - 金额：26920元
   - 司机电话：13600136001
   - 状态：已完成
   - 商品：芒果果汁50箱，金桂茶30箱

2. **订单o2** - 李四的订单
   - 金额：29900元
   - 司机电话：13600136002
   - 状态：已发货

3. **订单o3** - 王五的订单
   - 金额：31940元
   - 司机电话：13600136001
   - 状态：待发货

### 6. 交易记录（5条）
1. 张三充值50000元（代理打款）
2. 张三发货扣款-26920元
3. 李四充值30000元（代理打款）
4. 李四发货扣款-29900元
5. 王五充值5000元（赠送）

### 7. 补充销售数据（1条）
- 代理商a1（张三）
- A产品，10箱
- 日期：2024-12-20
- 备注：测试

---

## 如何通过系统手动恢复这些数据

### 第一步：添加商品（4个商品）

**操作路径**：管理端 → 商品管理 → 添加商品

#### 商品1：芒果果汁
1. 点击"添加商品"
2. 上传商品图片（如果没有，可以用占位图）
3. 商品名称：`芒果果汁`
4. 商品价格：`299` 元/箱
5. 商品重量：点击快捷按钮选择 `2.5` kg/箱
6. 素材库：上传2-3张素材图片（可选）
7. 保存

#### 商品2：金桂茶
1. 点击"添加商品"
2. 上传商品图片
3. 商品名称：`金桂茶`
4. 商品价格：`399` 元/箱
5. 商品重量：点击快捷按钮选择 `3` kg/箱
6. 素材库：上传素材图片
7. 保存

#### 商品3：茉莉茶
1. 点击"添加商品"
2. 上传商品图片
3. 商品名称：`茉莉茶`
4. 商品价格：`499` 元/箱
5. 商品重量：点击快捷按钮选择 `3.5` kg/箱
6. 素材库：上传素材图片
7. 保存

#### 商品4：龙井茶
1. 点击"添加商品"
2. 上传商品图片
3. 商品名称：`龙井茶`
4. 商品价格：`599` 元/箱
5. 商品重量：点击快捷按钮选择 `4` kg/箱
6. 素材库：上传素材图片
7. 保存

### 第二步：添加收款账户（3个账户）

**操作路径**：管理端 → 财务管理 → 收款账户

**注意**：收款账户管理功能可能需要通过后端API直接创建，或者系统有创建入口。如果系统界面没有创建功能，需要：
- 检查是否有"添加收款账户"按钮
- 或者通过API直接创建（需要开发配合）

#### 创建收款账户：
1. **公司对公账户**
   - 账户名称：`公司对公账户`
   - 初始余额：`0`

2. **张总微信**
   - 账户名称：`张总微信`
   - 初始余额：`0`

3. **张总支付宝**
   - 账户名称：`张总支付宝`
   - 初始余额：`0`

### 第三步：添加代理商（5个代理商）

**操作路径**：管理端 → 客户（代理管理）→ 添加代理

#### 代理商1：张三
1. 点击"添加代理"
2. 上传头像（可选，会显示默认头像）
3. 姓名：`张三`
4. 手机号：`13800138001`
5. 备用手机号：`13900139001`
6. 地址：`北京市朝阳区建国路88号`
7. A产品目标（箱/年）：`500`
8. 混合产品目标（箱/年）：`300`
9. 保存

**充值操作**（在代理详情页或财务管理页）：
- 点击"充值"
- 选择代理商：张三
- 充值原因：代理打款
- 选择收款账户：公司对公账户（或任意一个）
- 金额：`50000`
- 上传凭证（可以上传任意图片作为测试）
- 备注：`初始充值`
- 确认充值

**补充数据操作**（在代理详情页）：
- 点击"补充数据"
- 产品类型：A产品
- 数量：`10`
- 日期：选择 `2024-12-20`
- 备注：`测试`
- 确认补充

#### 代理商2：李四
1. 点击"添加代理"
2. 上传头像（可选）
3. 姓名：`李四`
4. 手机号：`13800138002`
5. 备用手机号：留空
6. 地址：`上海市浦东新区陆家嘴环路1000号`
7. A产品目标（箱/年）：`400`
8. 混合产品目标（箱/年）：`250`
9. 保存

**充值操作**：
- 充值50000元（代理打款）
- 然后创建订单扣款29900元，余额会变成21000元
- 再扣款21000元，余额会变成0元
- 再扣款1500元，余额会变成-1500元（欠款状态）

**更简单的方式**：
- 充值30000元（代理打款）
- 然后通过"扣款"功能，直接扣款31500元
- 余额会变成-1500元

#### 代理商3：王五
1. 点击"添加代理"
2. 上传头像（可选）
3. 姓名：`王五`
4. 手机号：`13800138003`
5. 备用手机号：留空
6. 地址：`广州市天河区珠江新城花城大道`
7. A产品目标（箱/年）：`600`
8. 混合产品目标（箱/年）：`400`
9. 保存

**充值操作**：
- 点击"充值"
- 充值原因：选择"其他"（对应gift类型）
- 金额：`5000`
- 备注：`赠送`
- 确认充值

**注意**：如果系统界面没有"其他"选项，可能需要在充值表单中添加"赠送"选项，或者先充值为"代理打款"，后续通过其他方式调整。

#### 代理商4：赵六
1. 点击"添加代理"
2. 上传头像（可选）
3. 姓名：`赵六`
4. 手机号：`13800138004`
5. 备用手机号：`13900139004`
6. 地址：`深圳市南山区科技园南区`
7. A产品目标（箱/年）：`350`
8. 混合产品目标（箱/年）：`200`
9. 保存

**充值操作**：
- 充值8200元（代理打款）

#### 代理商5：啊
1. 点击"添加代理"
2. 上传头像（可选）
3. 姓名：`啊`
4. 手机号：`13288888888`
5. 备用手机号：留空
6. 地址：`浙江省`
7. A产品目标（箱/年）：`1000`
8. 混合产品目标（箱/年）：`500`
9. 保存

**注意**：这个代理余额为0，不需要充值。

### 第四步：创建促销活动（2个）

**操作路径**：管理端 → 数据驾驶舱 → 右上角"促销"按钮 → 添加促销

#### 促销活动1：芒果果汁促销
1. 点击"添加促销"（如果界面有）
2. 活动名称：`芒果果汁促销`
3. 活动描述：`芒果果汁买100箱送8箱随机茶`
4. 门槛数量：`100` 箱
5. 赠品设置：
   - 选择赠品商品：`金桂茶`
   - 赠品数量：`8` 箱
6. 活动开始日期：`2024-12-01`
7. 活动结束日期：`2025-12-31`
8. 保存

**注意**：促销活动的创建功能需要确认系统界面是否支持。如果界面不支持，需要通过API创建。

#### 促销活动2：茶类产品促销
1. 点击"添加促销"
2. 活动名称：`茶类产品促销`
3. 活动描述：`茶类产品买100箱送6箱随机茶`
4. 门槛数量：`100` 箱
5. 赠品设置：
   - 选择赠品商品：`金桂茶`
   - 赠品数量：`6` 箱
6. 活动开始日期：`2024-12-01`
7. 活动结束日期：`2025-12-31`
8. 保存

### 第五步：创建订单（3个订单）

**操作路径**：管理端 → 开单（极速开单）

#### 订单1：张三的订单（已完成）
1. 选择代理商：`张三`
2. 选择商品和数量：
   - 芒果果汁：`50` 箱
   - 金桂茶：`30` 箱
3. 选择车型：任意选择（不影响金额）
4. 司机电话：`13600136001`
5. 上传发货照片：上传1-3张图片
6. 备注：`订单o1`
7. 创建订单

**注意**：这个订单会：
- 从张三余额扣款：50×299 + 30×399 = 26920元
- 张三余额从15000变成-11920元（但数据库中显示15000，说明可能还有其他充值）

**更新订单状态**：
- 进入订单详情页
- 更新状态为"已完成"

#### 订单2：李四的订单（已发货）
1. 选择代理商：`李四`
2. 选择商品和数量：
   - 需要选择商品使总金额达到29900元
   - 例如：芒果果汁 100箱 = 29900元
3. 司机电话：`13600136002`
4. 上传发货照片
5. 备注：`订单o2`
6. 创建订单

**更新订单状态**：
- 进入订单详情页
- 更新状态为"已发货"

#### 订单3：王五的订单（待发货）
1. 选择代理商：`王五`
2. 选择商品和数量：
   - 需要选择商品使总金额达到31940元
   - 例如：芒果果汁 50箱 + 茉莉茶 35箱 = 14950 + 17465 = 32415元
   - 或者调整数量使总金额接近31940元
3. 司机电话：`13600136001`
4. 上传发货照片
5. 备注：`订单o3`
6. 创建订单

**注意**：订单状态保持"待发货"即可。

### 第六步：调整余额到目标值

由于创建订单会扣款，需要调整代理商余额到数据库中的值：

#### 张三的余额调整
当前余额应该是：50000 - 26920 = 23080元
但数据库中显示15000元，说明可能：
- 需要再充值：50000 - 15000 - 26920 = 8080元
- 或者先充值50000，创建订单扣26920，再扣8080

**操作**：
1. 充值8080元（代理打款）
2. 或者充值50000元后，创建订单扣26920，再扣款8080

#### 李四的余额调整
当前余额：30000 - 29900 = 100元
但数据库中显示-1500元

**操作**：
- 扣款1600元，余额变成-1500元

#### 王五的余额调整
当前余额：5000 + 创建订单扣款后的余额
但数据库中显示28500元

**操作**：
- 需要充值：28500 - 5000 + 订单金额 = 约33500元
- 或者先充值33500元，再创建订单

---

## 重要提示

1. **余额计算**：创建订单会自动扣款，所以需要根据订单金额倒推充值金额。

2. **顺序很重要**：
   - 先添加商品
   - 再添加代理商
   - 然后充值
   - 最后创建订单（会扣款）

3. **收款账户**：收款账户可能需要通过后端API创建，检查系统界面是否有创建功能。

4. **促销活动**：促销活动的创建功能需要确认系统界面是否支持。

5. **时间问题**：交易记录和订单的时间会自动设置为当前时间，无法精确还原到数据库中的时间。

6. **数据完整性**：某些数据（如订单的商品明细）需要根据数据库中的JSON数据手动创建。

---

## 测试建议

恢复数据后，建议测试：

1. ✅ 查看代理商列表，确认所有代理都显示正确
2. ✅ 查看代理商详情，确认余额、目标、交易记录正确
3. ✅ 查看订单列表，确认订单信息正确
4. ✅ 查看交易记录，确认金额和时间正确
5. ✅ 查看促销活动，确认规则正确
6. ✅ 测试创建新订单，确认计算正确
7. ✅ 测试充值扣款，确认余额更新正确

---

## 如果某些功能界面不支持

如果以下功能在系统界面中没有：
- 收款账户的创建
- 促销活动的创建
- 某些充值原因的选择

可以通过以下方式：
1. 检查是否有隐藏的功能入口
2. 通过后端API直接创建（需要开发配合）
3. 临时添加这些功能的界面（如果时间允许）

