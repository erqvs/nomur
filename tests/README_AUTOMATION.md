# 数据添加自动化脚本使用指南

## 简介

这是一个交互式的 Selenium 自动化脚本，用于：
1. **添加各种数据**：商品、代理商、促销活动、订单等
2. **检查功能性问题**：验证页面元素、测试导航、检查表单等
3. **移动端测试**：浏览器以手机尺寸（390x844）打开，模拟移动端环境

脚本采用交互式控制，每个步骤执行前都会等待用户确认，确保您可以完全控制操作流程。

## 环境要求

### 1. Python 环境
- Python 3.7 或更高版本

### 2. 浏览器和驱动
- **Chrome 浏览器**（推荐）或 Firefox
- **ChromeDriver**（与 Chrome 版本匹配）

### 3. 安装依赖

```bash
cd tests
pip install -r requirements.txt
```

## ChromeDriver 安装

### Windows
1. 查看 Chrome 版本：打开 Chrome → 设置 → 关于 Chrome
2. 下载对应版本的 ChromeDriver：https://chromedriver.chromium.org/
3. 将 `chromedriver.exe` 放到系统 PATH 或项目目录

### Mac
```bash
# 使用 Homebrew 安装
brew install chromedriver

# 或手动下载后放到 /usr/local/bin/
```

### Linux
```bash
# Ubuntu/Debian
sudo apt-get install chromium-chromedriver

# 或手动下载后放到 /usr/local/bin/
```

## 使用方法

### 1. 运行脚本

```bash
cd tests
python data_entry_automation.py
```

### 2. 操作流程

脚本会引导您完成以下步骤：

1. **初始化浏览器** - 等待确认后打开 Chrome 浏览器（移动端模式：390x844）
2. **打开网站** - 访问 https://nomur.linkmate.site/
3. **登录系统** - 输入管理员手机号进行登录（可选）
4. **选择操作** - 从菜单中选择要执行的操作：
   - **自动数据添加**：自动生成测试数据并添加（商品、代理商、促销、订单）
   - **批量添加**：一键批量添加多种测试数据
   - **功能检查**：检查页面元素、验证数据、测试导航、测试表单
   - **手动操作模式**：暂停脚本，等待手动操作

### 3. 快速开始（推荐）

**最快方式**：选择选项 5（批量添加测试数据）
- 输入要添加的数量（或直接回车使用默认值）
- 脚本会自动生成所有测试数据并批量添加
- 每个步骤执行前会等待您确认

### 3. 交互式控制

- **每个步骤前**：脚本会显示提示信息，等待您按回车键继续
- **输入 'q'**：可以随时输入 'q' 退出脚本
- **手动操作模式**：选择选项 5，脚本会暂停，等待您手动完成操作后按回车继续

## 功能说明

### 自动数据添加功能（使用测试数据）

脚本会自动生成测试数据，无需手动输入！

#### 1. 自动添加商品
- **自动生成**：商品名称、价格、重量
- 支持批量添加（可指定数量）
- 数据来源：预定义的15种商品名称 + 随机价格和重量

#### 2. 自动添加代理商
- **自动生成**：代理商姓名、手机号、地址
- 支持备用手机号（40%概率生成）
- 支持批量添加（可指定数量）
- 数据来源：预定义的15个姓名 + 随机手机号 + 随机地址

#### 3. 自动添加促销活动
- **自动生成**：活动名称、说明、满足条件
- 支持批量添加（可指定数量）
- 数据来源：预定义的10种活动名称 + 随机说明和条件

#### 4. 自动创建订单
- **自动生成**：代理商选择、商品及数量
- 支持批量创建（可指定数量）
- 每个订单包含1-3种商品，数量随机

#### 5. 批量添加测试数据（推荐）
- **一键批量添加**：商品 + 代理商 + 促销活动 + 订单
- 可自定义每种数据的数量
- 适合快速搭建测试环境

### 功能检查功能

#### 5. 检查页面功能元素
- 检查页面上的按钮、输入框、列表等元素
- 统计可见元素数量
- 验证页面基本功能是否正常

#### 6. 验证数据是否存在
- 搜索已添加的数据
- 验证数据是否正确显示
- 检查数据添加是否成功

#### 7. 测试导航功能
- 测试各个导航项是否可点击
- 验证页面跳转是否正常
- 检查导航功能完整性

#### 8. 测试表单提交功能
- 检查表单元素是否存在
- 验证必填字段
- 测试表单提交流程

## 注意事项

1. **页面元素可能变化**：如果页面结构发生变化，脚本可能需要调整选择器
2. **网络延迟**：如果网络较慢，可能需要增加等待时间
3. **手动干预**：如果自动操作失败，可以使用"手动操作模式"完成
4. **浏览器版本**：确保 ChromeDriver 版本与 Chrome 浏览器版本匹配

## 故障排除

### 问题：找不到 ChromeDriver
**解决方案**：
- 确保 ChromeDriver 在系统 PATH 中
- 或修改脚本，指定 ChromeDriver 路径

### 问题：元素定位失败
**解决方案**：
- 检查页面是否完全加载
- 使用"手动操作模式"完成操作
- 检查页面结构是否变化

### 问题：登录失败
**解决方案**：
- 检查手机号是否正确
- 手动登录后使用"手动操作模式"继续

## 自定义配置

可以修改脚本中的以下配置：

```python
BASE_URL = "https://nomur.linkmate.site/"  # 网站地址
WAIT_TIMEOUT = 10  # 元素等待超时时间（秒）
```

## 安全提示

- 脚本会在本地运行，不会上传任何数据
- 建议在测试环境使用
- 生产环境使用前请充分测试

## 技术支持

如遇问题，请检查：
1. Python 版本是否符合要求
2. 依赖包是否安装完整
3. ChromeDriver 是否正确安装
4. 网络连接是否正常

