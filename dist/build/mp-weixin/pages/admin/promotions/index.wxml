<view class="promotions-page data-v-34c36886"><view class="promotion-list data-v-34c36886"><view wx:for="{{a}}" wx:for-item="promo" wx:key="m" class="promotion-card data-v-34c36886" bindtap="{{promo.n}}"><view class="promotion-card__header data-v-34c36886"><view class="{{['promotion-card__status', 'data-v-34c36886', promo.b && 'promotion-card__status--active']}}">{{promo.a}}</view><view class="promotion-card__actions data-v-34c36886" catchtap="{{promo.f}}"><view class="action-btn data-v-34c36886" bindtap="{{promo.d}}">{{promo.c}}</view><view class="action-btn action-btn--danger data-v-34c36886" bindtap="{{promo.e}}">删除</view></view></view><text class="promotion-card__name data-v-34c36886">{{promo.g}}</text><text class="promotion-card__desc data-v-34c36886">{{promo.h}}</text><view class="promotion-card__rule data-v-34c36886"><text class="rule-label data-v-34c36886">规则：</text><text class="rule-text data-v-34c36886">每满 {{promo.i}} 件，赠送：</text></view><view class="promotion-card__gifts data-v-34c36886"><view wx:for="{{promo.j}}" wx:for-item="gift" wx:key="c" class="gift-tag data-v-34c36886">{{gift.a}} x{{gift.b}}</view></view><view class="promotion-card__date data-v-34c36886"><text class="data-v-34c36886">活动时间：{{promo.k}} ~ {{promo.l}}</text></view></view><view wx:if="{{b}}" class="empty-state data-v-34c36886"><image src="{{c}}" class="empty-icon data-v-34c36886" mode="aspectFit"/><text class="empty-text data-v-34c36886">暂无促销活动</text></view></view><view class="add-btn data-v-34c36886" bindtap="{{d}}"><text class="add-btn__icon data-v-34c36886">+</text><text class="add-btn__text data-v-34c36886">添加促销活动</text></view><view wx:if="{{e}}" class="{{['data-v-34c36886', 'modal-mask', E]}}" bindtap="{{F}}"><view class="modal-content data-v-34c36886" catchtap="{{D}}"><text class="modal-title data-v-34c36886">添加促销活动</text><view class="modal-form data-v-34c36886"><view class="form-item data-v-34c36886"><text class="form-label data-v-34c36886">活动名称</text><input class="form-input data-v-34c36886" placeholder="如：年终大促" value="{{f}}" bindinput="{{g}}"/></view><view class="form-item data-v-34c36886"><text class="form-label data-v-34c36886">活动说明</text><input class="form-input data-v-34c36886" placeholder="如：每满100件赠送5件" value="{{h}}" bindinput="{{i}}"/></view><view class="form-item data-v-34c36886"><text class="form-label data-v-34c36886">满足条件（件）</text><input class="form-input data-v-34c36886" type="number" placeholder="如：100" value="{{j}}" bindinput="{{k}}"/></view><view class="form-item data-v-34c36886"><text class="form-label data-v-34c36886">触发条件产品（可组合选择）</text><view class="product-select data-v-34c36886"><view wx:for="{{l}}" wx:for-item="product" wx:key="e" class="{{['product-select-item', 'data-v-34c36886', product.f && 'product-select-item--active', product.g && 'product-select-item--in-group']}}"><view class="product-select-item__left data-v-34c36886" bindtap="{{product.c}}"><view class="product-select-item__check data-v-34c36886"><text wx:if="{{product.a}}" class="data-v-34c36886">✓</text></view><text class="product-select-item__name data-v-34c36886">{{product.b}}</text></view><view wx:if="{{product.d}}" class="product-select-item__group-badge data-v-34c36886"><text class="data-v-34c36886">组合</text></view></view></view><view wx:if="{{m}}" class="group-target-section data-v-34c36886"><view class="group-target-header data-v-34c36886"><text class="group-target-label data-v-34c36886">组合产品：{{n}}</text><view class="group-target-actions data-v-34c36886"><view class="group-target-btn group-target-btn--cancel data-v-34c36886" bindtap="{{o}}">取消组合</view><view class="group-target-btn group-target-btn--save data-v-34c36886" bindtap="{{p}}">保存组合</view></view></view><view class="group-target-tip data-v-34c36886"><text class="data-v-34c36886">当这些产品的总数量达到 {{q}} 件时，触发促销</text></view></view></view><view class="form-item data-v-34c36886"><text class="form-label data-v-34c36886">赠品选择（可多选）</text><view class="product-select data-v-34c36886"><view wx:for="{{r}}" wx:for-item="product" wx:key="j" class="{{['product-select-item', 'data-v-34c36886', product.k && 'product-select-item--active']}}"><view class="product-select-item__left data-v-34c36886" bindtap="{{product.c}}"><view class="product-select-item__check data-v-34c36886"><text wx:if="{{product.a}}" class="data-v-34c36886">✓</text></view><text class="product-select-item__name data-v-34c36886">{{product.b}}</text></view><view wx:if="{{product.d}}" class="product-select-item__quantity data-v-34c36886" catchtap="{{product.i}}"><view class="quantity-control data-v-34c36886"><view class="quantity-btn quantity-btn--small data-v-34c36886" bindtap="{{product.e}}">-</view><input type="number" value="{{product.f}}" class="quantity-input quantity-input--small data-v-34c36886" bindinput="{{product.g}}"/><view class="quantity-btn quantity-btn--small data-v-34c36886" bindtap="{{product.h}}">+</view></view></view></view></view></view><view class="form-item data-v-34c36886"><text class="form-label data-v-34c36886">开始日期</text><picker class="data-v-34c36886" mode="date" value="{{v}}" bindchange="{{w}}"><view class="form-picker data-v-34c36886" bindtap="{{t}}">{{s}}</view></picker></view><view class="form-item data-v-34c36886"><text class="form-label data-v-34c36886">结束日期</text><picker class="data-v-34c36886" mode="date" value="{{z}}" bindchange="{{A}}"><view class="form-picker data-v-34c36886" bindtap="{{y}}">{{x}}</view></picker></view></view><view class="modal-actions data-v-34c36886"><view class="modal-btn modal-btn--cancel data-v-34c36886" bindtap="{{B}}">取消</view><view class="modal-btn modal-btn--confirm data-v-34c36886" bindtap="{{C}}">确认添加</view></view></view></view></view>