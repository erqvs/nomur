"use strict";const t=require("../../../common/vendor.js"),e=require("../../../common/assets.js"),o=require("../../../stores/app.js"),a=require("../../../api/index.js"),i=t.defineComponent({__name:"list",setup(i){o.useAppStore();const n=t.ref(""),r=t.ref([]),s=t.ref(!0);t.onLoad(e=>{(null==e?void 0:e.agentId)&&(n.value=e.agentId,t.index.setNavigationBarTitle({title:"订单列表"})),d()});const d=async()=>{try{s.value=!0,r.value=await a.orderApi.getAll(n.value||void 0)}catch(e){t.index.showToast({title:"加载订单失败",icon:"none"})}finally{s.value=!1}},l=t.computed(()=>r.value),u=t=>{const e=new Date(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`};return t.onMounted(()=>{d()}),(o,a)=>t.e({a:t.f(l.value,(o,a,i)=>t.e({a:t.t(o.id.slice(-8).toUpperCase())},n.value?{}:{b:t.t(o.agentName)},{c:t.f(o.items,(e,o,a)=>({a:t.t(e.productName),b:t.t(e.quantity),c:t.t((e.quantity*e.price).toLocaleString()),d:e.productId})),d:t.t(o.totalWeight.toFixed(1)),e:t.t(o.totalAmount.toLocaleString()),f:t.t(u(o.createdAt)),g:o.driverPhone},o.driverPhone?{h:t.t(o.driverPhone)}:{},{i:o.giftItems&&o.giftItems.length>0},o.giftItems&&o.giftItems.length>0?t.e({j:e._imports_0$6,k:o.promotionNames&&o.promotionNames.length>0},o.promotionNames&&o.promotionNames.length>0?{l:t.f(o.promotionNames,(e,a,i)=>t.e({a:t.t(e),b:a<o.promotionNames.length-1},(o.promotionNames.length,{}),{c:a}))}:{},{m:t.f(o.giftItems,(e,o,a)=>({a:t.t(e.productName),b:t.t(e.quantity),c:e.productId}))}):{},{n:o.id,o:t.o(e=>{return a=o.id,void t.index.navigateTo({url:`/pages/admin/orders/detail?id=${a}`});var a},o.id)})),b:!n.value,c:0===l.value.length},0===l.value.length?{d:e._imports_1$2}:{})}}),n=t._export_sfc(i,[["__scopeId","data-v-51c47901"]]);wx.createPage(n);
