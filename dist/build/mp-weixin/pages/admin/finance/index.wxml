<view class="finance-page data-v-561626ef"><view class="quick-actions data-v-561626ef"><view class="quick-action-btn data-v-561626ef" bindtap="{{b}}"><image src="{{a}}" class="quick-action-icon data-v-561626ef" mode="aspectFit"/><text class="quick-action-btn__text data-v-561626ef">充值</text></view><view class="quick-action-btn quick-action-btn--danger data-v-561626ef" bindtap="{{d}}"><image src="{{c}}" class="quick-action-icon data-v-561626ef" mode="aspectFit"/><text class="quick-action-btn__text data-v-561626ef">扣款</text></view><view class="quick-action-btn quick-action-btn--teal data-v-561626ef" bindtap="{{f}}"><image src="{{e}}" class="quick-action-icon data-v-561626ef" mode="aspectFit"/><text class="quick-action-btn__text data-v-561626ef">调货</text></view></view><view class="filter-bar data-v-561626ef"><view wx:for="{{g}}" wx:for-item="type" wx:key="b" class="{{['filter-item', 'data-v-561626ef', type.c && 'filter-item--active']}}" bindtap="{{type.d}}">{{type.a}}</view></view><view class="transaction-list data-v-561626ef"><view wx:for="{{h}}" wx:for-item="tx" wx:key="s" class="transaction-card data-v-561626ef"><view class="transaction-card__header data-v-561626ef"><view class="transaction-card__icon data-v-561626ef"><image src="{{tx.a}}" class="tx-icon data-v-561626ef" mode="aspectFit"/></view><view class="transaction-card__info data-v-561626ef"><text class="transaction-card__agent data-v-561626ef" catchtap="{{tx.c}}">{{tx.b}}</text><text class="transaction-card__reason data-v-561626ef">{{tx.d}}</text><text wx:if="{{tx.e}}" class="transaction-card__payee data-v-561626ef" catchtap="{{tx.g}}"> 收款人：{{tx.f}}</text><view wx:if="{{tx.h}}" class="transaction-card__order-items data-v-561626ef"><text wx:for="{{tx.i}}" wx:for-item="item" wx:key="c" class="order-item-tag data-v-561626ef">{{item.a}} x{{item.b}}</text></view></view><view class="transaction-card__right data-v-561626ef"><text class="{{['transaction-card__amount', 'data-v-561626ef', tx.l && 'amount-positive', tx.m && 'amount-negative']}}">{{tx.j}}¥{{tx.k}}</text><view wx:if="{{tx.n}}" class="transaction-card__proof-thumbnail data-v-561626ef" catchtap="{{tx.q}}"><image src="{{tx.o}}" class="proof-thumbnail-img data-v-561626ef" mode="aspectFill"/><view class="proof-thumbnail-badge data-v-561626ef"><image src="{{tx.p}}" class="proof-badge-icon data-v-561626ef" mode="aspectFit"/></view></view></view></view><view class="transaction-card__footer data-v-561626ef"><view class="transaction-card__time-wrapper data-v-561626ef"><text class="transaction-card__time data-v-561626ef">{{tx.r}}</text></view></view></view><view wx:if="{{i}}" class="empty-state data-v-561626ef"><image src="{{j}}" class="empty-icon data-v-561626ef" mode="aspectFit"/><text class="empty-text data-v-561626ef">暂无交易记录</text></view></view><view wx:if="{{k}}" class="modal-mask data-v-561626ef" bindtap="{{K}}"><view class="modal-content data-v-561626ef" catchtap="{{J}}"><text class="modal-title data-v-561626ef">充值</text><view class="modal-form data-v-561626ef"><text class="modal-label data-v-561626ef">选择代理</text><tag-select wx:if="{{m}}" class="data-v-561626ef" u-i="561626ef-0" bind:__l="__l" bindupdateModelValue="{{l}}" u-p="{{m}}"/><text class="modal-label data-v-561626ef">充值原因</text><view class="reason-grid data-v-561626ef"><view class="{{['reason-item', 'data-v-561626ef', n && 'reason-item--active']}}" bindtap="{{o}}"> 代理打款 </view><view class="{{['reason-item', 'data-v-561626ef', p && 'reason-item--active']}}" bindtap="{{q}}"> 运费 </view><view class="{{['reason-item', 'data-v-561626ef', r && 'reason-item--active']}}" bindtap="{{s}}"> 其他 </view></view><view wx:if="{{t}}" class="payment-account-select data-v-561626ef"><text class="modal-label data-v-561626ef">选择收款账户</text><tag-select wx:if="{{w}}" class="data-v-561626ef" u-i="561626ef-1" bind:__l="__l" bindupdateModelValue="{{v}}" u-p="{{w}}"/></view><view wx:if="{{x}}" class="gift-products-section data-v-561626ef"><text class="modal-label data-v-561626ef">产品赠送（可选，按类型组合）</text><text class="form-desc data-v-561626ef">选择产品类型，系统将从该类型下的产品中自动分配</text><view class="gift-type-select data-v-561626ef"><view wx:for="{{y}}" wx:for-item="category" wx:key="k" class="{{['gift-type-item', 'data-v-561626ef', category.l && 'gift-type-item--active']}}"><view class="gift-type-item__left data-v-561626ef" bindtap="{{category.d}}"><view class="gift-type-item__check data-v-561626ef"><text wx:if="{{category.a}}" class="data-v-561626ef">✓</text></view><view class="gift-type-item__info data-v-561626ef"><text class="gift-type-item__name data-v-561626ef">{{category.b}}</text><text class="gift-type-item__products data-v-561626ef">{{category.c}}</text></view></view><view wx:if="{{category.e}}" class="gift-type-item__quantity data-v-561626ef" catchtap="{{category.j}}"><view class="quantity-control data-v-561626ef"><view class="quantity-btn quantity-btn--small data-v-561626ef" bindtap="{{category.f}}">-</view><input type="number" value="{{category.g}}" class="quantity-input quantity-input--small data-v-561626ef" bindinput="{{category.h}}"/><view class="quantity-btn quantity-btn--small data-v-561626ef" bindtap="{{category.i}}">+</view></view></view></view></view></view><view class="form-item data-v-561626ef"><text class="modal-label data-v-561626ef">{{z}}</text><input class="remark-input-field data-v-561626ef" placeholder="{{A}}" value="{{B}}" bindinput="{{C}}"/></view><quick-input wx:if="{{E}}" class="data-v-561626ef" u-i="561626ef-2" bind:__l="__l" bindupdateModelValue="{{D}}" u-p="{{E}}"/><image-uploader wx:if="{{G}}" class="data-v-561626ef" u-i="561626ef-3" bind:__l="__l" bindupdateModelValue="{{F}}" u-p="{{G}}"/></view><view class="modal-actions data-v-561626ef"><view class="modal-btn modal-btn--cancel data-v-561626ef" bindtap="{{H}}">取消</view><view class="modal-btn modal-btn--confirm data-v-561626ef" bindtap="{{I}}">确认充值</view></view></view></view><view wx:if="{{L}}" class="modal-mask data-v-561626ef" bindtap="{{ad}}"><view class="modal-content data-v-561626ef" catchtap="{{ac}}"><text class="modal-title data-v-561626ef">扣款</text><view class="modal-form data-v-561626ef"><text class="modal-label data-v-561626ef">选择代理</text><tag-select wx:if="{{N}}" class="data-v-561626ef" u-i="561626ef-4" bind:__l="__l" bindupdateModelValue="{{M}}" u-p="{{N}}"/><text class="modal-label data-v-561626ef">扣款原因</text><view class="reason-grid data-v-561626ef"><view class="{{['reason-item', 'data-v-561626ef', O && 'reason-item--active']}}" bindtap="{{P}}"> 发货扣款 </view><view class="{{['reason-item', 'data-v-561626ef', Q && 'reason-item--active']}}" bindtap="{{R}}"> 其他 </view></view><view wx:if="{{S}}" class="data-v-561626ef"><text class="modal-label data-v-561626ef">选择产品（可多选）</text><view class="product-select data-v-561626ef"><view wx:for="{{T}}" wx:for-item="product" wx:key="j" class="{{['product-select-item', 'data-v-561626ef', product.k && 'product-select-item--active']}}"><view class="product-select-item__left data-v-561626ef" bindtap="{{product.c}}"><view class="product-select-item__check data-v-561626ef"><text wx:if="{{product.a}}" class="data-v-561626ef">✓</text></view><text class="product-select-item__name data-v-561626ef">{{product.b}}</text></view><view wx:if="{{product.d}}" class="product-select-item__quantity data-v-561626ef" catchtap="{{product.i}}"><view class="quantity-control data-v-561626ef"><view class="quantity-btn quantity-btn--small data-v-561626ef" bindtap="{{product.e}}">-</view><input type="number" value="{{product.f}}" class="quantity-input quantity-input--small data-v-561626ef" bindinput="{{product.g}}"/><view class="quantity-btn quantity-btn--small data-v-561626ef" bindtap="{{product.h}}">+</view></view></view></view></view></view><view class="form-item data-v-561626ef"><text class="modal-label data-v-561626ef">{{U}}</text><input class="remark-input-field data-v-561626ef" placeholder="{{V}}" value="{{W}}" bindinput="{{X}}"/></view><quick-input wx:if="{{Z}}" class="data-v-561626ef" u-i="561626ef-5" bind:__l="__l" bindupdateModelValue="{{Y}}" u-p="{{Z}}"/></view><view class="modal-actions data-v-561626ef"><view class="modal-btn modal-btn--cancel data-v-561626ef" bindtap="{{aa}}">取消</view><view class="modal-btn modal-btn--confirm modal-btn--danger data-v-561626ef" bindtap="{{ab}}">确认扣款</view></view></view></view><view wx:if="{{ae}}" class="modal-mask data-v-561626ef" bindtap="{{at}}"><view class="modal-content modal-content--large data-v-561626ef" catchtap="{{as}}"><text class="modal-title data-v-561626ef">调货</text><text class="modal-desc data-v-561626ef">A代理发货给B代理，公司退款给A，从B账户扣款</text><view class="modal-form data-v-561626ef"><text class="modal-label data-v-561626ef">发货方（收款）</text><tag-select wx:if="{{ag}}" class="data-v-561626ef" u-i="561626ef-6" bind:__l="__l" bindupdateModelValue="{{af}}" u-p="{{ag}}"/><text class="modal-label data-v-561626ef">收货方（付款）</text><tag-select wx:if="{{ai}}" class="data-v-561626ef" u-i="561626ef-7" bind:__l="__l" bindupdateModelValue="{{ah}}" u-p="{{ai}}"/><text class="modal-label data-v-561626ef">选择产品（可多选）</text><view class="product-select data-v-561626ef"><view wx:for="{{aj}}" wx:for-item="product" wx:key="j" class="{{['product-select-item', 'data-v-561626ef', product.k && 'product-select-item--active']}}"><view class="product-select-item__left data-v-561626ef" bindtap="{{product.c}}"><view class="product-select-item__check data-v-561626ef"><text wx:if="{{product.a}}" class="data-v-561626ef">✓</text></view><text class="product-select-item__name data-v-561626ef">{{product.b}}</text></view><view wx:if="{{product.d}}" class="product-select-item__quantity data-v-561626ef" catchtap="{{product.i}}"><view class="quantity-control data-v-561626ef"><view class="quantity-btn quantity-btn--small data-v-561626ef" bindtap="{{product.e}}">-</view><input type="number" value="{{product.f}}" class="quantity-input quantity-input--small data-v-561626ef" bindinput="{{product.g}}"/><view class="quantity-btn quantity-btn--small data-v-561626ef" bindtap="{{product.h}}">+</view></view></view></view></view><quick-input wx:if="{{al}}" class="data-v-561626ef" u-i="561626ef-8" bind:__l="__l" bindupdateModelValue="{{ak}}" u-p="{{al}}"/><view class="transfer-calc data-v-561626ef"><view class="calc-row calc-row--total data-v-561626ef"><text class="calc-label data-v-561626ef">发货人收入金额</text><text class="calc-value calc-value--primary data-v-561626ef">¥{{am}}</text></view><view class="calc-row calc-row--total data-v-561626ef"><text class="calc-label data-v-561626ef">收货人扣除金额</text><text class="calc-value calc-value--primary data-v-561626ef">¥{{an}}</text></view></view><view class="form-item data-v-561626ef"><text class="modal-label data-v-561626ef">备注（可选）</text><input class="remark-input-field data-v-561626ef" placeholder="请输入备注信息" value="{{ao}}" bindinput="{{ap}}"/></view></view><view class="modal-actions data-v-561626ef"><view class="modal-btn modal-btn--cancel data-v-561626ef" bindtap="{{aq}}">取消</view><view class="modal-btn modal-btn--confirm data-v-561626ef" bindtap="{{ar}}">确认调货</view></view></view></view><view wx:if="{{av}}" class="modal-mask data-v-561626ef" bindtap="{{aB}}"><view class="modal-content modal-content--large data-v-561626ef" catchtap="{{aA}}"><text class="modal-title data-v-561626ef">{{aw}}的打款记录</text><view class="payments-list data-v-561626ef"><view wx:for="{{ax}}" wx:for-item="tx" wx:key="e" class="payment-item data-v-561626ef"><view class="payment-item__header data-v-561626ef"><text class="payment-item__time data-v-561626ef">{{tx.a}}</text><text class="payment-item__amount data-v-561626ef">¥{{tx.b}}</text></view><text wx:if="{{tx.c}}" class="payment-item__payee data-v-561626ef">收款人：{{tx.d}}</text></view><view wx:if="{{ay}}" class="empty-state data-v-561626ef"><text class="empty-text data-v-561626ef">暂无打款记录</text></view></view><view class="modal-actions data-v-561626ef"><view class="modal-btn modal-btn--cancel data-v-561626ef" bindtap="{{az}}">关闭</view></view></view></view><view wx:if="{{aC}}" class="modal-mask data-v-561626ef" bindtap="{{aI}}"><view class="modal-content modal-content--large data-v-561626ef" catchtap="{{aH}}"><text class="modal-title data-v-561626ef">{{aD}}的收款明细</text><view class="payments-list data-v-561626ef"><view wx:for="{{aE}}" wx:for-item="tx" wx:key="d" class="payment-item data-v-561626ef"><view class="payment-item__header data-v-561626ef"><text class="payment-item__agent data-v-561626ef">{{tx.a}}</text><text class="payment-item__amount data-v-561626ef">¥{{tx.b}}</text></view><text class="payment-item__time data-v-561626ef">{{tx.c}}</text></view><view wx:if="{{aF}}" class="empty-state data-v-561626ef"><text class="empty-text data-v-561626ef">暂无收款记录</text></view></view><view class="modal-actions data-v-561626ef"><view class="modal-btn modal-btn--cancel data-v-561626ef" bindtap="{{aG}}">关闭</view></view></view></view></view>