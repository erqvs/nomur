"use strict";const t=require("../../../common/vendor.js"),a=require("../../../common/assets.js"),e=require("../../../stores/app.js");Math||n();const n=()=>"../../../components/CustomTabBar/index.js",o=t.defineComponent({__name:"index",setup(n){const o=e.useAppStore(),s=t.computed(()=>o.globalStats),i=t.computed(()=>o.agents),r=()=>{try{const a=getCurrentPages();if(a.length>0){const e="/"+a[a.length-1].route;t.index.$emit("update-tabbar-path",e)}}catch(a){console.error("更新 tabbar 路径失败:",a)}};t.onMounted(()=>{r()}),t.onShow(async()=>{r(),await Promise.all([o.loadStatistics(),o.loadAgents()])});const d=t=>{const a=Math.max(...s.value.productStats.map(t=>t.quantity));return Math.round(t/a*100)},u=t=>{const a=Math.max(...s.value.last30DaysProductStats.map(t=>t.quantity));return Math.round(t/a*100)},c=t=>{const a=Math.abs(t).toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2});return t<0?`-${a}`:a},m=()=>{t.index.navigateTo({url:"/pages/admin/products/index"})},p=()=>{t.index.navigateTo({url:"/pages/admin/promotions/index"})},l=()=>{t.index.navigateTo({url:"/pages/admin/trucks/index"})},g=()=>{t.index.navigateTo({url:"/pages/super/orders/index"})},x=()=>{t.index.reLaunch({url:"/pages/index/index"})};return(e,n)=>({a:t.o(m),b:t.o(p),c:t.o(l),d:t.o(g),e:t.o(x),f:a._imports_0$1,g:t.t(s.value.totalShipments),h:a._imports_1$1,i:t.t(s.value.last30DaysShipments),j:t.f(s.value.productStats,(a,e,n)=>({a:t.t(a.productName),b:t.t(a.quantity),c:d(a.quantity)+"%",d:a.productId})),k:t.f(s.value.last30DaysProductStats,(a,e,n)=>({a:t.t(a.productName),b:t.t(a.quantity),c:u(a.quantity)+"%",d:a.productId})),l:t.f(i.value,(a,e,n)=>({a:a.avatar||"/static/images/default-avatar.svg",b:t.t(a.name),c:t.t(a.phone1),d:t.t(c(a.balance)),e:a.balance<0?1:"",f:a.id,g:t.o(e=>{return n=a.id,void t.index.navigateTo({url:`/pages/admin/agents/detail?id=${n}`});var n},a.id)}))})}}),s=t._export_sfc(o,[["__scopeId","data-v-7065198e"]]);wx.createPage(s);
