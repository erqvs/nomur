"use strict";const t=require("../../../common/vendor.js"),e=require("../../../common/assets.js"),o=require("../../../stores/app.js"),a=require("../../../api/index.js");Math||n();const n=()=>"../../../components/CustomTabBar/index.js",r=t.defineComponent({__name:"index",setup(n){o.useAppStore();const r=t.ref(""),i=t.ref([]),s=t.ref(!0);t.onLoad(e=>{(null==e?void 0:e.agentId)&&(r.value=e.agentId,t.index.setNavigationBarTitle({title:"订单列表"})),l()});const d=()=>{try{const e=getCurrentPages();if(e.length>0){const o="/"+e[e.length-1].route;t.index.$emit("update-tabbar-path",o)}}catch(e){console.error("更新 tabbar 路径失败:",e)}};t.onShow(()=>{d(),l()});const l=async()=>{try{s.value=!0,i.value=await a.orderApi.getAll(r.value||void 0)}catch(e){t.index.showToast({title:"加载订单失败",icon:"none"})}finally{s.value=!1}},u=t.computed(()=>i.value),g=t=>{const e=new Date(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`};return t.onMounted(()=>{d(),l()}),(o,a)=>t.e({a:t.f(u.value,(o,a,n)=>t.e({a:t.t(o.id.slice(-8).toUpperCase()),b:t.o(e=>(e=>{t.index.navigateTo({url:`/pages/super/orders/edit?id=${e.id}`})})(o),o.id)},r.value?{}:{c:t.t(o.agentName)},{d:t.f(o.items,(e,o,a)=>({a:t.t(e.productName),b:t.t(e.quantity),c:t.t((e.quantity*e.price).toLocaleString()),d:e.productId})),e:t.t(o.totalWeight.toFixed(1)),f:t.t(o.totalAmount.toLocaleString()),g:t.t(g(o.createdAt)),h:o.driverPhone},o.driverPhone?{i:t.t(o.driverPhone)}:{},{j:o.giftItems&&o.giftItems.length>0},o.giftItems&&o.giftItems.length>0?t.e({k:e._imports_0$6,l:o.promotionNames&&o.promotionNames.length>0},o.promotionNames&&o.promotionNames.length>0?{m:t.f(o.promotionNames,(e,a,n)=>t.e({a:t.t(e),b:a<o.promotionNames.length-1},(o.promotionNames.length,{}),{c:a}))}:{},{n:t.f(o.giftItems,(e,o,a)=>({a:t.t(e.productName),b:t.t(e.quantity),c:e.productId}))}):{},{o:o.id,p:t.o(e=>{return a=o.id,void t.index.navigateTo({url:`/pages/admin/orders/detail?id=${a}`});var a},o.id)})),b:!r.value,c:0===u.value.length},0===u.value.length?{d:e._imports_1$2}:{})}}),i=t._export_sfc(r,[["__scopeId","data-v-d9f85e5b"]]);wx.createPage(i);
