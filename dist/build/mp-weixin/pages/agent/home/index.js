"use strict";const e=require("../../../common/vendor.js"),t=require("../../../common/assets.js"),r=require("../../../stores/app.js");Math||a();const a=()=>"../../../components/BalanceCard/index.js",n=e.defineComponent({__name:"index",setup(a){const n=r.useAppStore(),o=e.computed(()=>n.currentAgent),s=e.computed(()=>n.getAgentStats(n.currentAgentId)),u=e.computed(()=>n.getAgentOrders(n.currentAgentId).slice(0,5)),i=e=>{const t=n.products.find(t=>t.id===e);return(null==t?void 0:t.name)||e},d=(e,t)=>{if(t.isGroup){if(t.productNames)return t.productNames;if(t.products&&Array.isArray(t.products))return t.products.map(e=>i(e)).join(" + ");if(e.startsWith("_group_")||e.startsWith("group_")){const t=n.agents.find(e=>e.id===n.currentAgentId);if(t&&t.yearlyTargets){const r=t.yearlyTargets[e];if(r&&"object"==typeof r&&"products"in r){const e=r.products;if(Array.isArray(e))return e.map(e=>i(e)).join(" + ")}}}return e}return i(e)},l=()=>{e.index.navigateTo({url:"/pages/agent/balance/index"})},p=()=>{e.index.navigateTo({url:"/pages/agent/promotions/index"})},g=()=>{e.index.navigateTo({url:"/pages/agent/orders/index"})},c=()=>{e.index.navigateTo({url:"/pages/agent/materials/index"})},m=()=>{e.index.reLaunch({url:"/pages/index/index"})},v=e=>{const t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`};return(r,a)=>{var n,i;return e.e({a:o.value},o.value?e.e({b:t._imports_0$4,c:e.o(m),d:o.value.avatar||"/static/images/default-avatar.svg",e:e.t(o.value.name),f:e.t(o.value.phone1),g:e.o(l),h:e.p({balance:o.value.balance,subInfo:"点击查看余额明细"}),i:s.value&&s.value.yearlyStats},s.value&&s.value.yearlyStats?e.e({j:e.f(s.value.yearlyStats,(t,r,a)=>({a:e.t(d(r,t)),b:e.t(t.completed),c:e.t(t.target),d:e.t(t.percentage),e:a%2==1?1:"",f:a%2==1?1:"",g:t.percentage+"%",h:r})),k:t._imports_1$2,l:0===Object.keys(s.value.yearlyStats).length},(Object.keys(s.value.yearlyStats).length,{})):{},{m:null==(n=s.value)?void 0:n.promotionProgress},(null==(i=s.value)?void 0:i.promotionProgress)?e.e({n:e.t(s.value.promotionProgress.purchased),o:e.f(s.value.promotionProgress.giftsEarned,(t,r,a)=>({a:e.t(t.productName),b:e.t(t.quantity),c:t.productId})),p:0===s.value.promotionProgress.giftsEarned.length},(s.value.promotionProgress.giftsEarned.length,{}),{q:s.value.promotionProgress.purchased%100+"%"}):{},{r:t._imports_1$7,s:e.o(l),t:t._imports_0$6,v:e.o(p),w:t._imports_1$2,x:e.o(g),y:t._imports_3$1,z:e.o(c),A:e.f(u.value,(t,r,a)=>({a:e.t(t.id.slice(-6)),b:e.f(t.items,(t,r,a)=>({a:e.t(t.productName),b:e.t(t.quantity),c:t.productId})),c:e.t(v(t.createdAt)),d:e.t(t.totalAmount.toLocaleString()),e:t.id})),B:0===u.value.length},(u.value.length,{})):{})}}}),o=e._export_sfc(n,[["__scopeId","data-v-4b335176"]]);wx.createPage(o);
