"use strict";const e=require("../../common/vendor.js"),a=require("../../utils/upload.js"),t=e.defineComponent({__name:"index",props:{modelValue:{},label:{},maxCount:{},addText:{default:"上传图片"},tip:{},sizeType:{default:()=>["compressed"]},sourceType:{default:()=>["album","camera"]}},emits:["update:modelValue","change"],setup(t,{emit:o}){const l=t,n=o,u=async()=>{const t=l.maxCount?l.maxCount-l.modelValue.length:9;e.index.chooseImage({count:t,sizeType:l.sizeType,sourceType:l.sourceType,success:async t=>{try{const e=await a.uploadImages(t.tempFilePaths),o=[...l.modelValue,...e];n("update:modelValue",o),n("change",o)}catch(o){e.index.showToast({title:o.message||"图片上传失败",icon:"none"})}}})};return(a,t)=>e.e({a:a.label},a.label?{b:e.t(a.label)}:{},{c:e.f(a.modelValue,(a,t,o)=>({a:a,b:e.o(a=>(a=>{e.index.previewImage({current:l.modelValue[a],urls:l.modelValue})})(t),t),c:e.o(a=>(a=>{e.index.showModal({title:"提示",content:"确定删除这张图片吗？",success:e=>{if(e.confirm){const e=l.modelValue.filter((e,t)=>t!==a);n("update:modelValue",e),n("change",e)}}})})(t),t),d:t})),d:!a.maxCount||a.modelValue.length<a.maxCount},!a.maxCount||a.modelValue.length<a.maxCount?{e:e.t(a.addText),f:e.o(u)}:{},{g:a.tip},a.tip?{h:e.t(a.tip)}:{})}}),o=e._export_sfc(t,[["__scopeId","data-v-b3ef8e31"]]);wx.createComponent(o);
